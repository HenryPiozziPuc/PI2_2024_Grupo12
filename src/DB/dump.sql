DROP TABLE ACCOUNTS;
DROP TABLE EVENTS;
DROP TABLE WALLET;
DROP TABLE BETS;
DROP SEQUENCE SEQ_ACCOUNTS;
DROP SEQUENCE SEQ_EVENTS;
DROP SEQUENCE SEQ_BALANCE;
DROP SEQUENCE SEQ_BETS;

CREATE TABLE ACCOUNTS(
    CPF INTEGER NOT NULL PRIMARY KEY,
    COMPLETE_NAME VARCHAR2(500) NOT NULL,
    EMAIL VARCHAR2(500) NOT NULL UNIQUE,
    PASSWORD VARCHAR2(64) NOT NULL,
    PHONE_NUMBER INTEGER NOT NULL,
    BIRTHDATE DATE NOT NULL,
    TOKKEN VARCHAR2(32) NOT NULL UNIQUE,
    ROLE NUMBER(1) NOT NULL,
    CREATED_AT DATE DEFAULT SYSDATE
);

CREATE TABLE WALLET(
    ID INTEGER NOT NULL PRIMARY KEY,
    CPF INTEGER NOT NULL UNIQUE,
    BALANCE INTEGER NOT NULL,
    FOREIGN KEY (CPF) REFERENCES ACCOUNTS(CPF)
);

CREATE TABLE EVENTS(
    ID INTEGER NOT NULL PRIMARY KEY,
    NAME VARCHAR2(500) NOT NULL,
    CATEGORY VARCHAR2(50) NOT NULL,
    FEE INTEGER NOT NULL,
    START_DATE DATE NOT NULL,
    END_DATE DATE NOT NULL,
    APPROVED NUMBER(1) NOT NULL,
    STATUS_EVENT NUMBER(1) NOT NULL
);

CREATE TABLE BETS(
    ID INTEGER NOT NULL PRIMARY KEY,
    CPF INTEGER NOT NULL,
    ID_EVENTS INTEGER NOT NULL,
    BET_VALUE INTEGER NOT NULL,
    CHOICE NUMBER(1) NOT NULL,
    BET_AT DATE DEFAULT SYSDATE,
    FOREIGN KEY (CPF) REFERENCES ACCOUNTS(CPF),
    FOREIGN KEY (ID_EVENTS) REFERENCES EVENTS(ID)
);

CREATE SEQUENCE SEQ_ACCOUNTS START WITH 1 INCREMENT BY 1
CREATE SEQUENCE SEQ_EVENTS START WITH 1 INCREMENT BY 1
CREATE SEQUENCE SEQ_BALANCE START WITH 1 INCREMENT BY 1
CREATE SEQUENCE SEQ_BETS START WITH 1 INCREMENT BY 1

COMMIT;
